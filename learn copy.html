<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
	<title>German Vocabulary - version 1</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
  	<link href="css/styles.css" rel="stylesheet">
	<script type="text/javascript">
	window.onerror = function(errorMsg, url, lineNumber) {
	  "use strict";
	  alert(errorMsg + " " + url + " " + lineNumber);
	  return false;
	};
	</script>
</head>
<body onload="onLoad();">
<article id="repeatScreen">

<div id="learnWords2-area">
  <div id="optionsForAnswers" style="display:table;">
    <div id=back style="vertical-align: middle;height: 100%;display: table-cell; width:10%;"><button type="button" class="optionBtn" onclick="LWgui.backWord();"><</button></div>
    <div style="display: table-cell;height:100%; width:80%;"><button id=displayWord type="button" class="optionBtn" onclick="LWgui.listen();"></button></div>
    <div id=forward style="vertical-align: middle;height: 100%;display: table-cell; width:10%;"><button type="button" class="optionBtn" onclick="LWgui.nextWord();">></button></div>
  </div>
</div>
<div id=message style="display:none;"></div>
</article>

<script src="js/LW.js"></script>
<script src="js/LWutils.js"></script>
<script src="js/jquery-3.1.1.min.js"></script>
<script src="js/flowtype.js"></script>
<script>
var lw = LW.BoxOfQuestions(LW.LWdb('germanfamily'));
var wordNumber = 1;

var LWgui = {

	    initialize: function() {

        var oReq = new XMLHttpRequest();
        oReq.onload = this.reqListener;
        oReq.open("get", "data/json/german-demo.json", true);
        oReq.send();
	    },

      reqListener: function () {
        var wordlist = JSON.parse(this.responseText);
        console.log(wordlist);
        lw.db.loadWords(wordlist);
        LWgui.showRepeat();
      },

	    showRepeat : function() {

        if(wordNumber == lw.db.numberOfWords())
        {
          var nextButton = document.getElementById("forward");
          nextButton.style.visibility = 'hidden';
        }
        else {
          var nextButton = document.getElementById("forward");
          nextButton.style.visibility = 'visible';
        }
        var questionObj = lw.db.getWord(wordNumber);
        console.log(questionObj.translate);
        var displayWord = document.getElementById("displayWord");
        displayWord.innerHTML = '<img class=imgAnswer src="data/pictures/' + questionObj.translate + '">';

        var questionObj = lw.db.getWord(wordNumber);
        LW.Utils.playAudio("data/sounds/" + questionObj.word);

	    },
      backWord : function() {

        if(wordNumber > 1){
          wordNumber--
          this.showRepeat();
        }
        else {
          window.location.href = "index.html";
        }
      },
      nextWord : function() {

        if(wordNumber < lw.db.numberOfWords()){
          wordNumber++
          this.showRepeat();
        }
      },
    listen : function()
    {
      var questionObj = lw.db.getWord(wordNumber);
      LW.Utils.playAudio("data/sounds/" + questionObj.word);
      console.log("data/sounds/" + questionObj.word);
    },
};

function onDeviceReady() {
  LWgui.initialize();
}

function onLoad() {
  window.setTimeout(function() {
      var e = document.createEvent('Events');
      e.initEvent("deviceready", true, false);
      document.dispatchEvent(e);
  }, 50);
    document.addEventListener('deviceready', onDeviceReady, false);
}

$('body').flowtype({
   minFont : 12,
   maxFont : 40
});
</script>
</body>
</html>
